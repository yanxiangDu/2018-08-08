"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var SetBanner=function(){function e(t){_classCallCheck(this,e),this.ele=t,this.oUllis=t.querySelectorAll("ul>li"),this.oUl=t.querySelector("ul"),this.oOl=t.querySelector("ol"),this.oLiWidth=this.oUllis[0].offsetWidth,this.index=1,this.time,this.bool="原始值",this.oldThis=this}return _createClass(e,[{key:"init",value:function(){this.setFocus(),this.cloneLi(),this.autoLoop(),this.inOut(),this.leftRight(),this.setFocusClick(),this.hid()}},{key:"setFocus",value:function(){var i="";this.oUllis.forEach(function(t,e){i+=0===e?'<li class="active" index="'.concat(e+1,'"></li>'):'<li index="'.concat(e+1,'"></li>')}),this.oOl.innerHTML=i}},{key:"cloneLi",value:function(){var t=this.oUllis[0],e=this.oUllis[this.oUllis.length-1],i=t.cloneNode(!0),o=e.cloneNode(!0);this.oUl.appendChild(i),this.oUl.insertBefore(o,t),this.oUl.style.width=(this.oUllis.length+2)*this.oLiWidth+"px",this.oUl.style.left=-this.oLiWidth+"px"}},{key:"autoLoop",value:function(){var t=this;this.time=setInterval(function(){t.index++,move(t.oUl,{left:-t.index*t.oLiWidth},t.loopEnd.bind(t.oldThis))},3e3)}},{key:"loopEnd",value:function(){this.index===this.oUllis.length+1?(this.index=1,this.oUl.style.left=-this.index*this.oLiWidth+"px"):0===this.index&&(this.index=this.oUllis.length,this.oUl.style.left=-this.index*this.oLiWidth+"px"),this.setFocusStyle(),this.bool="原始值"}},{key:"setFocusStyle",value:function(){var i=this;this.oOllis=this.ele.querySelectorAll("ol>li"),this.oOllis.forEach(function(t,e){t.className="",t.getAttribute("index")==i.index&&(t.className="active")})}},{key:"inOut",value:function(){var t=this;this.ele.addEventListener("mouseenter",function(){clearInterval(t.time)}),this.ele.addEventListener("mouseleave",function(){t.autoLoop()})}},{key:"leftRight",value:function(){var e=this;this.ele.addEventListener("click",function(t){if("left"===(t=t||window.event).target.getAttribute("name")){if("原始值"!==e.bool)return;e.bool="随便,不是原始值就行",e.index--,move(e.oUl,{left:-e.index*e.oLiWidth},function(){e.loopEnd()})}else if("right"===t.target.getAttribute("name")){if("原始值"!==e.bool)return;e.bool="随便,不是原始值就行",e.index++,move(e.oUl,{left:-e.index*e.oLiWidth},function(){e.loopEnd()})}})}},{key:"setFocusClick",value:function(){var e=this;this.oOl.addEventListener("click",function(t){if("LI"===(t=t||window.event).target.tagName){if("原始值"!==e.bool)return;e.bool="随便,不是原始值就行",e.index=+t.target.getAttribute("index"),move(e.oUl,{left:-e.index*e.oLiWidth},function(){e.loopEnd()})}})}},{key:"hid",value:function(){var t=this;document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?t.autoLoop():"hidden"===document.visibilityState&&clearInterval(t.time)})}}]),e}();function move(o,n,l){var s={};for(var t in n)!function(i){s[i]=setInterval(function(){var t="opacity"===i?100*myGetStyle(o,i):parseInt(myGetStyle(o,i)),e="opacity"===i?(100*n[i]-t)/5:(n[i]-t)/5;t+=e=0<e?Math.ceil(e):Math.floor(e),o.style[i]="opacity"===i?t/100:"".concat(t,"px"),"opacity"===i?t===100*n[i]&&(clearInterval(s[i]),delete s[i]):t===n[i]&&(clearInterval(s[i]),delete s[i]),0===Object.keys(s).length&&l()},50)}(t)}function myGetStyle(t,e){return window.getComputedStyle?window.getComputedStyle(t)[e]:t.currentStyle[e]}