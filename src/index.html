<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/root.css">
    <link rel="stylesheet" href="./css/index.css">
</head>
<body>
    <!-- header -->
    <div class="headerOut">
        <div id="header">
            <ul class="fr">
                <li>我的订单 /</li>
                <li>我的特卖 /</li>
                <li>会员俱乐部 /</li>
                <li>客户服务 /</li>
                <li>手机版 /</li>
                <li>更多>></li>
            </ul>
        </div>
    </div>
    <!-- search -->
    <div class="searchOut">
        <div id="search" >
            <div class="fr search_cont">
                <input type="text"><button>搜索</button>
            </div>
        </div>
    </div>
    <!-- nav -->
    <div class="navOut">
        <div id="nav">
            <ul class="fl">
                <li class="active">商品分类</li>
                <li><a href="#">首页</a></li>
                <li><a href="./pages/list.html?cat_one_id=食品酒水">食品酒水</a></li>
                <li><a href="./pages/list.html?cat_one_id=童装玩具">童装玩具</a></li>
                <li><a href="./pages/list.html?cat_one_id=家装建材">家装建材</a></li>
                <li><a href="./pages/list.html?cat_one_id=奶粉尿裤">奶粉尿裤</a></li>
                <li><a href="./pages/list.html?cat_one_id=海外购">海外购</a></li>
                <li><a href="./pages/list.html?cat_one_id=珠宝首饰">珠宝首饰</a></li>
                <li><a href="./pages/list.html?cat_one_id=智能设备">智能设备</a></li>
                <li><a href="./pages/list.html?cat_one_id=钟表眼镜">钟表眼镜</a></li>
                <li><a href="./pages/list.html?cat_one_id=手机相机">手机相机</a></li>
                <li><a href="./pages/list.html?cat_one_id=邮币乐器">邮币乐器</a></li>
                <li><a href="#">更多>></a></li>
            </ul>
            <ol>
                <li>女装/男装/内衣</li>
                <li>女鞋/男鞋/箱包</li>
                <li>护肤彩妆/个护</li>
                <li>运动户外</li>
                <li>家电数码</li>
                <li>母婴童装</li>
                <li>手表配饰</li>
                <li>居家的用品</li>
                <li>唯品生活</li>
                <li>唯品国际</li>
                <li>医药健康</li>
            </ol>
        </div>
    </div>
    <!-- banner -->
    <div class="baanerOut">
        <div id="banner">
            <ul class="banner_img">
                <li><img src="./images/1.jpg" alt=""></li>
                <li><img src="./images/2.jpg" alt=""></li>
                <li><img src="./images/3.jpg" alt=""></li>
                <li><img src="./images/4.jpg" alt=""></li>
                <li><img src="./images/5.jpg" alt=""></li>
            </ul>
            <ol class="banner_nav">

            </ol>
            <div class="banner_cut">
                <a href="JavaScript:;" name="left">&lt;</a>
                <a href="JavaScript:;" name="right">&gt;</a>
            </div>
        </div>
    </div>
    <!-- content -->
    <div class="contentOut">
        <div class="content_one content_all">
            <strong>夏凉清仓</strong>
            <div>
                夏凉清仓
            </div>
        </div>
        <div class="content_one content_all">
            <strong>最后疯抢</strong>
            <div>
                最后疯抢
            </div>
        </div>
        <div class="content_one content_all">
            <strong>唯品快抢</strong>
            <div>
                唯品快抢
            </div>
        </div>
        <div class="content_one content_all">
            <strong>品牌清仓</strong>
            <div>
                品牌清仓
            </div>
        </div>
        <div class="content_one content_all">
            <strong>女装</strong>
            <div>
                女装
            </div>
        </div>
        <div class="content_one content_all">
            <strong>母婴</strong>
            <div>
                母婴
            </div>
        </div>
        <div class="content_one content_all">
            <strong>家电</strong>
            <div>
                家电
            </div>
        </div>
        <div class="content_one content_all">
            <strong>国际</strong>
            <div>
                国际
            </div>
        </div>

    </div>
    <!-- footer -->
    <div class="footerOut">
        <div id="footer"> footer</div>
    </div>
    <!-- nav -->
    <div id="nav_side">
        <ul>
            <li class="active">夏凉清仓</li>
            <li>最后疯抢</li>
            <li>唯品快抢</li>
            <li>品牌清仓</li>
            <li>女装</li>
            <li>母婴</li>
            <li>家电</li>
            <li>国际</li>
            <li><a href="#">返回>></a></li>
        </ul>
    </div>
    <!-- login -->
    <div id="login">
        <div>
            <p class="active">登录</p>
            <p name="login_shopCar">购物车</p>
            <p name="backRoot">推出登陆</p>
            <p>喜欢</p>
            <p>收藏</p>
            <p>历史</p>
        </div>
    </div>
    <!-- onLogin -->
    <form id="onLogin">
        <div class="onLogin_IN">
            账 号：<input type="text" placeholder="用户名" class="onLoginText" placeholder="用户名/手机号/邮箱"><br>
            密 码：<input type="password" class="onLoginPaw" placeholder="密码"><br>
            <button>登陆</button><button><a href="./pages/register.html">注册</a></button>
            <div class="close">❌</div>
        </div>
    </form>
    <script src="./js/index.js"></script>
    <script src="./js/jquery.min.js"></script>
    <script src="./js/tools.js"></script>
    <script>
        /* 隐藏侧边栏，侧边栏点击的效果 */
        $(window).scroll(function(){
            if($(window).scrollTop() > 500 ){
                $('#login').fadeIn(100);
                $('#nav_side').fadeIn(100);
            }else{
                $('#login').fadeOut(100);
                $('#nav_side').fadeOut(100);
            }
            $('.content_one').each(function(key,item){
                if($(window).scrollTop() > $(item).offset().top - 300){
                    $('#nav_side li').eq(key)
                    .addClass('active')
                    .siblings().removeClass('active');
                }
            })
    
        })

        $('#nav_side li').each(function(key,item){
            if($(item).attr('name')!=='back'){
                $(item).click(function(){
                    $('html').animate({scrollTop:$('.content_one').eq(key).offset().top - 200} ,  300);
                })
            }
        })




        /*loop*/
        const oBanner = document.querySelector('#banner');
        // 通过构造函数/类方法,定义生成实例化对象
        const banner = new SetBanner( oBanner );

        banner.init();
    
        //login

        const oLogin = document.querySelector('#login>div>p');
        const oOnLogin =document.querySelector('#onLogin');
        const oHtml = document.querySelector('html');
        oLogin.addEventListener('click',function(){
            oOnLogin.style.display = 'block';

        })


        //close 
        const oClose = document.querySelector('.close');
        //console.log(oClose)
        oClose.addEventListener('click',()=>{
            oOnLogin.style.display = 'none';
        })


        //login vc
        //获取元素
        let oForm = document.querySelector('form');
        let username = document.querySelector('.onLoginText');
        let password = document.querySelector('.onLoginPaw');
        let oSpan = document.querySelector('.oSpan');
        let oBut = document.querySelector('.onLogin_IN>button');

        //submit
        oForm.addEventListener('submit',function(e){
            //获取 用户 输入的内容
            e.preventDefault();
            e.stopPropagation();
            let  oIptNameVal = username.value;
            let  oIputPwdaVal = password.value;

           // if(!/^\w{6,12}$/.test(username) || !/^[a-zA-Z0-9]{6,12}$/.test(password)){
           //     return alert('请 输入正确的密码');
           // }

            //发送请求
            $.ajax({
                url:'./server/goods_login.php',
                type:'post',
                data:{userName:oIptNameVal,userPwd:oIputPwdaVal},
                dataType:'json',
                success:result =>{
                    console.log(result);
                    if(result.res === 1){
                        
                        mySetCookie('login', 1 , 7 * 24 * 60 * 60);
                        oOnLogin.style.display = 'none';
                        window.alert('登陆成功点击确认')
                    }else{
                        window.alert('登陆失败，请检查您的密码，继续玩命登录');
                    }
                }
            })
        })
        //推出登陆
        let oBack = document.querySelector('[name="backRoot"]')
            oBack.addEventListener('click',()=>{
                mySetCookie('login',1 ,-1);
                window.alert('已经安全的退出登陆');
            })
        //购物车
        let shopCar = document.querySelector('[name="login_shopCar"]');
        //console.log(shopCar)
        shopCar.addEventListener('click',()=>{
                var cookieObj = myGetCookie();
                if(cookieObj.login === undefined){
                    let bool = window.confirm('你还没有登陆，请先登陆再继续购物')
                    if(bool === true){
                        oOnLogin.style.display = 'black';
                    }
                }else{
                    window.location.href = './pages/shoppingCart.html';
                }
        })
    //   oBut.addEventListener('click' , function(){
    //     window.location.href = `./pages/login.html?url=${window.location.href}`;
    //   })
    </script>
</body>
</html>


